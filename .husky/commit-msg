# =============================================================================
# Commit-msg Hook: Validate Commit Message Format
# =============================================================================
# Ensures commits follow Conventional Commits specification
# Format: <type>(<scope>): <description>
# Examples:
#   feat(auth): add JWT refresh token rotation
#   fix(rag): resolve context window overflow
#   docs(readme): update installation steps

echo "üìã Validating commit message format..."

npx --no -- commitlint --edit "$1" || {
  echo ""
  echo "‚ùå Commit message validation failed!"
  echo ""
  echo "Please use Conventional Commits format:"
  echo "  <type>(<scope>): <description>"
  echo ""
  echo "Types: feat, fix, docs, style, refactor, test, chore, perf, ci, build"
  echo ""
  echo "Examples:"
  echo "  feat(auth): add password reset functionality"
  echo "  fix(rag): handle empty context array"
  echo "  docs(api): update endpoint documentation"
  echo "  chore(deps): upgrade langchain to v0.2"
  echo ""
  exit 1
}

echo "‚úÖ Commit message format valid!"
