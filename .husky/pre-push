# =============================================================================
# Pre-push Hook: Run Tests
# =============================================================================
# Runs before pushing to ensure all tests pass

echo "ğŸ§ª Running pre-push checks..."

# Get the current branch
branch=$(git rev-parse --abbrev-ref HEAD)

echo "ğŸ“Œ Pushing to branch: $branch"

# Run backend tests
echo "ğŸ”¬ Running backend tests..."
cd backend && npm test -- --run || {
  echo ""
  echo "âŒ Backend tests failed! Push aborted."
  echo "Please fix failing tests before pushing."
  exit 1
}
cd ..

# Run frontend tests
echo "ğŸ”¬ Running frontend tests..."
cd frontend && npm run test:run || {
  echo ""
  echo "âŒ Frontend tests failed! Push aborted."
  echo "Please fix failing tests before pushing."
  exit 1
}
cd ..

echo "âœ… All tests passed! Proceeding with push..."
